<template>
  <div class="overlay flex flex-row" v-show="computedVisible">
    <div class="about section">
      <h1>nbsplayer</h1>
      <small>Note Block Studio as a website. Beta.</small>
    </div>
    <div class="actions section">
      <div class="load-song button flex flex-row flex-center">
        <font-awesome-icon icon="folder-open" fixed-width size="2x"></font-awesome-icon>
        <div class="button-body">Load a song</div>
        <input class="file-input" type="file" accept=".nbs" @change="loadFile">
      </div>
      <div class="new-song button flex flex-row flex-center" @click="newSong">
        <font-awesome-icon icon="file" fixed-width size="2x"></font-awesome-icon>
        <div class="button-body">Create a new song</div>
      </div>
      <div class="new-song button flex flex-row flex-center" @click="hide">
        <font-awesome-icon icon="times-circle" fixed-width size="2x"></font-awesome-icon>
        <div class="button-body">Dismiss</div>
      </div>
    </div>
  </div>
</template>

<script>
import overlayMixin from "./overlay.js";
import * as NBS from "../../NBS.js";

export default {
  mixins: [overlayMixin],
  methods: {
    loadFile(event) {
      const file = event.target.files[0];
      this.$parent.loadFile(file)
        .then(() => this.hide());
    },
    newSong() {
      const song = new NBS.Song();
      // start it off with a single layer
      song.addLayer();
      this.$parent.song = song;
      this.hide();
    },
  },
};
</script>

<style scoped>
.section {
  padding: 0 10px;
}

.about {
  border-right: 1px solid #777;
  padding-right: 20px;
}
.about h1 {
  margin: 0;
}

.actions {
  font-size: smaller;
}

.button {
  width: 250px;
  padding: 10px;
  border-radius: 5px;
  /* makes the added border not cause any size changes */
  border: 1px solid transparent;
}
.button:hover, .button:active {
  border: 1px solid #777;
}
.button:active {
  background-image: linear-gradient(#dfdfdf, #cdcdcd);
}
.button-body {
  padding-left: 5px;
}

.load-song {
  position: relative;
}
.file-input {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
</style>
